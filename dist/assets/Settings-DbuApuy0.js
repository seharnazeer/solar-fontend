import{r as u,R as e,M as R,n as U,o as V,P as j,s as A,h as T,i as W,p as G}from"./index-CuHqhT-B.js";import{L as oe,i as se}from"./Layout-CtjGH-YV.js";import{T as X}from"./Buttons-DLqq7mBN.js";function de(){var J,K,Q;const Y=localStorage.getItem("userId"),[i,$]=u.useState("Profile"),[L,m]=u.useState(!1);u.useState(!1);const[z,Z]=u.useState(!1),[M,ee]=u.useState(!1),[O,q]=u.useState(),[c,ae]=u.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[l,_]=u.useState({id:"",name:"",email:"",phone:"",password:""}),I=a=>{_({...l,[a.target.name]:a.target.value})},H=a=>{ae({...c,[a.target.name]:a.target.value})},te=async()=>{var r,d,s;m(!0);let a=await j("admin/udpateProfile",{id:l==null?void 0:l.id,name:l==null?void 0:l.name,email:l==null?void 0:l.email,password:l==null?void 0:l.password});((r=a==null?void 0:a.data)==null?void 0:r.status)==="1"?(F(),A((d=a==null?void 0:a.data)==null?void 0:d.message),m(!1)):(T((s=a==null?void 0:a.data)==null?void 0:s.message),m(!1))},ne=async()=>{var a,r,d;if((c==null?void 0:c.newPassword)!==(c==null?void 0:c.confirmPassword))W("New Password does not match with Confirm Password");else{m(!0);let s=await j("admin/udpatePassword",{id:Y,password:c==null?void 0:c.newPassword,confirmPassword:c==null?void 0:c.confirmPassword});((a=s==null?void 0:s.data)==null?void 0:a.status)==="1"?(F(),A((r=s==null?void 0:s.data)==null?void 0:r.message),m(!1)):(T((d=s==null?void 0:s.data)==null?void 0:d.message),m(!1))}},le=async(a,r)=>{var s,f,h,g,p,y;if(m(!0),parseInt(r)===1){let o=await j("admin/changeSetting",{id:a,value:0});((s=o==null?void 0:o.data)==null?void 0:s.status)==="1"?(m(!1),A((f=o==null?void 0:o.data)==null?void 0:f.message),F()):(m(!1),T((h=o==null?void 0:o.data)==null?void 0:h.message))}else{let o=await j("admin/changeSetting",{id:a,value:1});((g=o==null?void 0:o.data)==null?void 0:g.status)==="1"?(m(!1),A((p=o==null?void 0:o.data)==null?void 0:p.message),F()):(m(!1),T((y=o==null?void 0:o.data)==null?void 0:y.message))}};u.useEffect(()=>{(async()=>{var d,s,f,h,g,p,y,o,w,E,b,x,N,v,P,k,C,S,B,D,t;const r={headers:{accessToken:localStorage.getItem("accessToken")}};try{let n;i==="Profile"?(m(!0),n=await G.get(`https://shippinghack.myace.app/admin/getProfile/${localStorage.getItem("userId")}`,r),m(!1),_({id:(f=(s=(d=n==null?void 0:n.data)==null?void 0:d.data)==null?void 0:s.userData)==null?void 0:f.id,name:(p=(g=(h=n==null?void 0:n.data)==null?void 0:h.data)==null?void 0:g.userData)==null?void 0:p.name,email:(w=(o=(y=n==null?void 0:n.data)==null?void 0:y.data)==null?void 0:o.userData)==null?void 0:w.email,phone:(x=(b=(E=n==null?void 0:n.data)==null?void 0:E.data)==null?void 0:b.userData)==null?void 0:x.phone,address:(P=(v=(N=n==null?void 0:n.data)==null?void 0:N.data)==null?void 0:v.userData)==null?void 0:P.address,city:(S=(C=(k=n==null?void 0:n.data)==null?void 0:k.data)==null?void 0:C.userData)==null?void 0:S.city,country:(t=(D=(B=n==null?void 0:n.data)==null?void 0:B.data)==null?void 0:D.userData)==null?void 0:t.country})):i==="Preferences"&&(m(!0),n=await G.get("https://fominobackend.myace.app/admin/getSettings",r),m(!1),q(n))}catch(n){console.error("Error in request:",n)}})()},[i]);const F=async()=>{var r,d,s,f,h,g,p,y,o,w,E,b,x,N,v,P,k,C,S,B,D;var a={headers:{accessToken:localStorage.getItem("accessToken")}};try{let t;i==="Profile"?(t=await G.get(`https://shippinghack.myace.app/admin/getProfile/${localStorage.getItem("userId")}`,a),_({id:(s=(d=(r=t==null?void 0:t.data)==null?void 0:r.data)==null?void 0:d.userData)==null?void 0:s.id,name:(g=(h=(f=t==null?void 0:t.data)==null?void 0:f.data)==null?void 0:h.userData)==null?void 0:g.name,email:(o=(y=(p=t==null?void 0:t.data)==null?void 0:p.data)==null?void 0:y.userData)==null?void 0:o.email,phone:(b=(E=(w=t==null?void 0:t.data)==null?void 0:w.data)==null?void 0:E.userData)==null?void 0:b.phone,address:(v=(N=(x=t==null?void 0:t.data)==null?void 0:x.data)==null?void 0:N.userData)==null?void 0:v.address,city:(C=(k=(P=t==null?void 0:t.data)==null?void 0:P.data)==null?void 0:k.userData)==null?void 0:C.city,country:(D=(B=(S=t==null?void 0:t.data)==null?void 0:S.data)==null?void 0:B.userData)==null?void 0:D.country})):i==="Preferences"&&(t=await G.get("https://fominobackend.myace.app/admin/getSettings",a),q(t))}catch(t){W(t)}};return e.createElement(oe,{content:e.createElement("div",{className:"p-5 space-y-5"},e.createElement("div",{className:"flex justify-between items-center flex-wrap gap-5"},e.createElement("h2",{className:"text-themeDarkBlue text-2xl font-bold font-poppins"},"Settings")),e.createElement("div",{className:"py-5 space-y-1.5"},e.createElement("ul",{className:"flex flex-wrap items-center gap-8"},e.createElement(X,{title:"Profile",tab:i,onClick:()=>$("Profile")}),e.createElement(X,{title:"Change Password",tab:i,onClick:()=>$("Change Password")}))),i==="Profile"?e.createElement("div",{className:"bg-white rounded-lg p-5 space-y-5"},L?e.createElement("div",{className:"h-[360px]"},e.createElement(R,null)):e.createElement("div",{className:"grid grid-cols-2 gap-5"},e.createElement("div",{className:"flex flex-col gap-y-2"},e.createElement("label",{htmlFor:"name",className:"text-themeBlack font-medium font-manrope"},"Name"),e.createElement("input",{value:l==null?void 0:l.name,type:"text",name:"name",placeholder:"Enter Name",className:"border border-themeBorderGray rounded-md outline-none px-3 py-2 placeholder:font-manrope font-manrope",onChange:I})),e.createElement("div",{className:"flex flex-col gap-y-2"},e.createElement("label",{htmlFor:"email",className:"text-themeBlack font-medium font-manrope"},"Email"),e.createElement("input",{value:l==null?void 0:l.email,type:"email",name:"email",placeholder:"Enter Email",className:"border border-themeBorderGray rounded-md outline-none px-3 py-2 placeholder:font-manrope font-manrope",onChange:I})),e.createElement("div",{className:"flex flex-col gap-y-2"},e.createElement("label",{htmlFor:"number",className:"text-themeBlack font-medium font-manrope"},"Mobile number"),e.createElement("input",{value:l==null?void 0:l.phone,type:"number",name:"number",placeholder:"Enter Number",className:"border border-themeBorderGray rounded-md outline-none px-3 py-2 placeholder:font-manrope font-manrope",onChange:I})),e.createElement("div",{className:"flex flex-col gap-y-2"},e.createElement("label",{htmlFor:"password",className:"text-themeBlack font-medium font-manrope"},"Password"),e.createElement("input",{value:l==null?void 0:l.address,type:"password",name:"password",placeholder:"Enter address",className:"border border-themeBorderGray rounded-md outline-none px-3 py-2 placeholder:font-manrope font-manrope",onChange:I})),e.createElement("div",{className:"flex items-center justify-end gap-2 col-span-2"},e.createElement("button",{className:`flex items-center justify-center gap-2 text-sm border border-theme 
                text-white font-semibold font-manrope rounded-md px-5 py-2 h-10 bg-theme hover:bg-transparent hover:text-theme duration-200`,onClick:()=>window.history.back()},"Cancel"),e.createElement("button",{className:`flex items-center justify-center gap-2 text-sm border border-theme 
                 text-white font-semibold font-manrope rounded-md px-5 py-2 h-10 bg-theme hover:bg-transparent hover:text-theme duration-200`,onClick:te},"Save")))):i==="Preferences"?e.createElement("div",{className:"bg-white rounded-lg p-5 space-y-5"},L?e.createElement("div",{className:"h-[360px]"},e.createElement(R,null)):e.createElement("div",{className:"grid grid-cols-1 gap-5"},(Q=(K=(J=O==null?void 0:O.data)==null?void 0:J.data)==null?void 0:K.data)==null?void 0:Q.map((a,r)=>e.createElement("div",{className:"flex items-center justify-between border-[1.5px] rounded-lg p-2.5 gap-y-2 border-[#EBEDF0]"},e.createElement("label",{htmlFor:"email",className:"text-themeBlack font-medium font-manrope flex flex-col"},e.createElement("span",{className:"font-semibold text-lg"},(a==null?void 0:a.key)==="emailNotification"?"Email notification":(a==null?void 0:a.key)==="newsLetter"?"Neweletters":"Automated reports"),e.createElement("span",{className:"text-[#767C8C]"},(a==null?void 0:a.key)==="emailNotification"?"Allow to receive email notification":(a==null?void 0:a.key)==="newsLetter"?"Allow to stay updated and receive neweletter":"Allow to send us report automatically incase of any issue")),e.createElement("div",null,e.createElement(se,{onChange:()=>{le(a==null?void 0:a.id,a==null?void 0:a.value)},checked:(a==null?void 0:a.value)==="1",uncheckedIcon:!1,checkedIcon:!1,onColor:"#C40C34",onHandleColor:"#fff",className:"react-switch",boxShadow:"none",width:48})))))):e.createElement("div",{className:"bg-white rounded-lg p-5 space-y-5"},L?e.createElement("div",{className:"h-[360px]"},e.createElement(R,null)):e.createElement("div",{className:"grid grid-cols-2 gap-5"},e.createElement("div",{className:"flex flex-col gap-y-2 relative"},e.createElement("label",{htmlFor:"newPassword",className:"text-themeBlack font-medium font-manrope"},"New password"),e.createElement("input",{type:z?"text":"password",name:"newPassword",placeholder:"Enter New Password",className:"border border-themeBorderGray rounded-md outline-none px-3 py-2 placeholder:font-manrope",onChange:H}),e.createElement("button",{onClick:()=>Z(!z),type:"button",className:"text-themeBlack absolute right-4 top-10"},z?e.createElement(U,{size:24}):e.createElement(V,{size:24}))),e.createElement("div",{className:"flex flex-col gap-y-2 relative"},e.createElement("label",{htmlFor:"confirmPassword",className:"text-themeBlack font-medium font-manrope"},"Confirm Password"),e.createElement("input",{type:M?"text":"password",name:"confirmPassword",placeholder:"Enter Confirm Password",className:"border border-themeBorderGray rounded-md outline-none px-3 py-2 placeholder:font-manrope",onChange:H}),e.createElement("button",{onClick:()=>ee(!M),type:"button",className:"text-themeBlack absolute right-4 top-10"},M?e.createElement(U,{size:24}):e.createElement(V,{size:24}))),e.createElement("div",{className:"flex items-center justify-end gap-2 col-span-2"},e.createElement("button",{className:`flex items-center justify-center gap-2 text-sm border border-theme 
                text-white font-semibold font-manrope rounded-md px-5 py-2 h-10 bg-theme hover:bg-transparent hover:text-theme duration-200`},"Cancel"),e.createElement("button",{className:`flex items-center justify-center gap-2 text-sm border border-theme 
                 text-white font-semibold font-manrope rounded-md px-5 py-2 h-10 bg-theme hover:bg-transparent hover:text-theme duration-200`,onClick:ne},"Save")))))})}export{de as default};
